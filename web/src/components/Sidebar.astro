---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.replace(/\/$/, ""); // normalizer
---

<aside
  class="fixed left-0 top-0 h-screen w-[260px] bg-[#111318] border-r border-gray-800/80 flex flex-col items-center py-8 px-4 z-50"
>
  <div class="mb-10 w-full px-2">
    <div class="flex items-center space-x-3 text-white font-bold text-xl">
      <div class="bg-indigo-600 rounded-lg p-2 shadow-lg shadow-indigo-500/20">
        <svg
          class="w-6 h-6 text-white"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2.5"
            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
      </div>
      <span class="tracking-wide">AetherFlow</span>
    </div>
  </div>

  <nav class="flex flex-col gap-2 w-full">
    <a
      href="/"
      class={`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all w-full font-medium ${
        currentPath === ""
          ? "bg-indigo-600/10 text-indigo-400 border border-indigo-500/20"
          : "text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"
      }`}
    >
      <svg
        class="w-5 h-5 shrink-0"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 002-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
        ></path>
      </svg>
      <span class="text-sm">Live Farm</span>
    </a>

    <a
      href="/flows"
      class={`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all w-full font-medium ${
        currentPath === "/flows"
          ? "bg-indigo-600/10 text-indigo-400 border border-indigo-500/20"
          : "text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"
      }`}
    >
      <svg
        class="w-5 h-5 shrink-0"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
        ></path>
      </svg>
      <span class="text-sm">Pipelines</span>
    </a>
  </nav>

  <div class="mt-auto w-full pt-4">
    <div
      class="flex items-center space-x-3 px-3 py-2.5 text-gray-400 border border-gray-800/50 bg-[#16181e] rounded-lg cursor-default"
    >
      <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
      <span class="text-xs font-semibold uppercase tracking-wider"
        >Gateway Sync</span
      >
    </div>
  </div>
</aside>
