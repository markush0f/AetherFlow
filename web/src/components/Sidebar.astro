---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.replace(/\/$/, ""); // normalizer
---

<aside
  class="fixed left-0 top-0 h-screen w-[280px] bg-[#17191C] border-r border-[#2d3036] flex flex-col items-center py-8 px-5 z-50"
>
  <div class="mb-8 mt-2 text-center w-full">
    <div
      class="flex items-center justify-center space-x-3 text-gray-100 font-bold text-2xl"
    >
      <div
        class="bg-indigo-500 rounded-lg p-1.5 shadow-lg shadow-indigo-500/20"
      >
        <svg
          class="w-6 h-6 text-white"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2.5"
            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
      </div>
      <span class="tracking-tight">AetherFlow</span>
    </div>
  </div>

  <nav class="flex flex-col gap-2 w-full mt-4">
    <a
      href="/"
      class={`flex items-center space-x-3 px-4 py-3 rounded-xl transition-all w-full font-medium ${
        currentPath === ""
          ? "bg-indigo-500/15 text-indigo-400 border border-indigo-500/20"
          : "text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"
      }`}
    >
      <svg
        class="w-5 h-5 shrink-0"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 002-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
        ></path>
      </svg>
      <span class="text-sm">Live Farm</span>
    </a>

    <a
      href="/flows"
      class={`flex items-center space-x-3 px-4 py-3 rounded-xl transition-all w-full font-medium ${
        currentPath === "/flows"
          ? "bg-indigo-500/15 text-indigo-400 border border-indigo-500/20"
          : "text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"
      }`}
    >
      <svg
        class="w-5 h-5 shrink-0"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
        ></path>
      </svg>
      <span class="text-sm">Pipelines</span>
    </a>
  </nav>

  <div class="mt-auto w-full pt-4 border-t border-gray-800">
    <div
      class="flex items-center space-x-3 px-4 py-3 text-gray-500 cursor-default bg-black/20 rounded-xl"
    >
      <span class="w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"></span>
      <span class="text-sm">Gateway Connected</span>
    </div>
  </div>
</aside>
